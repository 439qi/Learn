# IPC

## 概述

**进程间通信**(IPC)是在多任务操作系统或联网的计算机之间运行的程序和进程所采用的通信技术  
IPC 有两种类型的进程间通信的方式分别是**本地过程调用**(LPC)和**远程过程调用**(RPC)

### 远程过程调用 RPC

RPC 是一种技术思想而非规范或协议
RPC 通信则需要跨域不同机器、不同进程，主要需要解决三个问题：函数 ID（服务寻址）、数据流的序列化和反序列化、网络传输  

RPC 可以用 HTTP 协议实现，但 HTTP 属于应用层协议，整个通信的代价比较高  
也可直接基于 TCP 进行远程调用，数据传输在传输层 TCP 完成，更加适合对效率要求比较高的场景  
RPC 主要依赖于客户端和服务器之间建立的 Socket 链接进行，但底层实现比 REST 更为复杂

#### RPC 流程

RPC 框架封装了2-9的细节

1. **客户端**(client)发起服务调用请求  
2. client stub 将调用方法、参数按照一定格式进行封装，通过服务提供的地址，发起网络请求  
3. 消息通过网络传输到服务端  
4. server stub 接受来自 socket 的消息  
5. server stub 将消息进行解包、告诉服务端调用的哪个服务，参数是什么  
6. 结果返回给 server stub
7. sever stub 把结果进行打包交给 socket  
8. socket 通过网络传输消息  
9. client slub 从 socket 拿到消息  
10. client stub 解包消息将结果返回给 client  

#### 本地进程调用 LPC
